service: database
configValidationMode: off

provider:
  name: openwhisk
  runtime: php

functions:
  addDB:
    handler: management.addDB
    name: database/addDB
    events:
      - http: POST database/addDB
  deleteDB:
    handler: management.deleteDB
    name: database/deleteDB
    events:
      - http: POST database/deleteDB
  getDBList:
    handler: management.getDBList
    name: database/getDBList
    events:
      - http: POST database/listDB
  getDBSettings:
    handler: management.getDBSettings
    name: database/getDBSettings
    events:
      - http: POST database/listDBSettings
  getPublicKey:
    handler: management.getPublicKey
    name: database/getPublicKey
    events:
      - http: POST database/publicKey
  getDBTables:
    handler: action.getDBTables
    name: database/getDBTables
    events:
      - http: POST database/tables
  getTable:
    handler: action.getTable
    name: database/getTable
    memory: 2048
    timeout: 600
    events:
      - http: POST database/table
  tableUpdate:
    handler: action.tableUpdate
    name: database/tableUpdate
    memory: 2048
    timeout: 600
    events:
      - http: POST database/update

plugins:
  - serverless-openwhisk